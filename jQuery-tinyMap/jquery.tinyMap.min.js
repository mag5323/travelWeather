(function(h,m,q,e){function f(a,b){try{return m.hasOwnProperty?a.hasOwnProperty(b.toString()):Object.prototype.hasOwnProperty.call(a,b.toString())}catch(c){}}function l(a){var b=a.css||"";this.setValues(a);this.span=h("<span/>").css({position:"relative",left:"-50%",top:"0","white-space":"nowrap"}).addClass(b);this.div=h("<div/>").css({position:"absolute",display:"none"});this.span.appendTo(this.div)}function n(a,b){f(m,"google")&&(this.markerCluster=this.map=null,this._markers=[],this.container=a,
this.options=h.extend({},p,b),this.interval=parseInt(this.options.interval,10)||200,this.GoogleMapOptions={center:new google.maps.LatLng(this.options.center.x,this.options.center.y),control:this.options.control,disableDefaultUI:this.options.disableDefaultUI,draggable:this.options.draggable,keyboardShortcuts:this.options.keyboardShortcuts,mapTypeId:google.maps.MapTypeId[this.options.mapTypeId.toUpperCase()],mapTypeControl:this.options.mapTypeControl,mapTypeControlOptions:{position:google.maps.ControlPosition[this.options.mapTypeControlOptions.position],
style:google.maps.MapTypeControlStyle[this.options.mapTypeControlOptions.style.toUpperCase()]},maxZoom:this.options.maxZoom,minZoom:this.options.minZoom,navigationControl:this.options.navigationControl,navigationControlOptions:{position:google.maps.ControlPosition[this.options.navigationControlOptions.position],style:google.maps.NavigationControlStyle[this.options.navigationControlOptions.style.toUpperCase()]},panControl:this.options.panControl,panControlOptions:{position:google.maps.ControlPosition[this.options.panControlOptions.position]},
rotateControl:this.options.rotateControl,scaleControl:this.options.scaleControl,scaleControlOptions:{position:google.maps.ControlPosition[this.options.scaleControlOptions.position],style:google.maps.ScaleControlStyle[this.options.scaleControlOptions.style.toUpperCase()]},scrollwheel:this.options.scrollwheel,streetViewControl:this.options.streetViewControl,streetViewControlOptions:{position:google.maps.ControlPosition[this.options.streetViewControlOptions.position]},zoom:this.options.zoom,zoomControl:this.options.zoomControl,
zoomControlOptions:{position:google.maps.ControlPosition[this.options.zoomControlOptions.position],style:google.maps.ZoomControlStyle[this.options.zoomControlOptions.style.toUpperCase()]}},h(this.container).html(this.options.loading),this.init())}var p={center:{x:"24",y:"121"},control:!0,disableDefaultUI:!1,draggable:!0,keyboardShortcuts:!0,mapTypeControl:!0,mapTypeControlOptions:{position:"TOP_RIGHT",style:"DEFAULT"},mapTypeId:"ROADMAP",marker:[],markerFitBounds:!1,markerCluster:!1,maxZoom:null,
minZoom:null,panControl:!0,panControlOptions:{position:"LEFT_TOP"},polyline:[],navigationControl:!0,navigationControlOptions:{position:"TOP_LEFT",style:"DEFAULT"},scaleControl:!0,scaleControlOptions:{position:"BOTTOM_LEFT",style:"DEFAULT"},scrollwheel:!0,streetViewControl:!0,streetViewControlOptions:{position:"LEFT_TOP"},zoom:4,zoomControl:!0,zoomControlOptions:{style:"LARGE",position:"LEFT_TOP"},notfound:"\u627e\u4e0d\u5230\u67e5\u8a62\u7684\u5730\u9ede",loading:"\u8b80\u53d6\u4e2d&hellip;",kml:{url:"",
viewport:!0,infowindow:!1},interval:200};l.prototype=new google.maps.OverlayView;l.prototype.onAdd=function(){var a=this.getPanes().overlayLayer;this.div.appendTo(h(a));this.listeners=[google.maps.event.addListener(this,"visible_changed",this.onRemove)]};l.prototype.draw=function(){var a=this.getProjection().fromLatLngToDivPixel(this.get("position"));this.div.css({left:a.x+"px",top:a.y+"px",display:"block"});this.text&&this.span.html(this.text.toString())};l.prototype.onRemove=function(){h(this.div).remove()};
n.prototype={VERSION:"2.6.2",_labels:[],_polylines:[],_polygons:[],_circles:[],_kmls:[],_directions:[],bounds:new google.maps.LatLngBounds,setZoom:function(a,b){f(b,"zoom")&&a&&a.setZoom(b.zoom)},kml:function(a,b){var c={},d="",c={};b=b?b:this.options;e!==b.kml&&(c={preserveViewport:!0,suppressInfoWindows:!1},d="string"===typeof b.kml&&0!==b.kml.length?b.kml:e!==b.kml.url?b.kml.url:"",c=new google.maps.KmlLayer(d,h.extend(c,b.kml)),this._kmls.push(c),c.setMap(a))},direction:function(a,b){var c="";
b=b?b:this.options;if(e!==b.direction&&0<b.direction.length)for(c in b.direction)f(b.direction,c)&&e!==b.direction[c]&&this.directionService(b.direction[c])},markers:function(a,b){var c="";b=b?b:this.options;if(e!==b.marker&&0<b.marker.length)for(c in b.marker)f(b.marker,c)&&f(b.marker[c],"addr")&&("object"===typeof b.marker[c].addr?2===b.marker[c].addr.length&&this.markerDirect(b.marker[c]):this.markerByGeocoder(b.marker[c]))},drawPolyline:function(a,b){var c={},c="",d={},k=[];b=b?b:this.options;
if(e!==b.polyline&&e!==b.polyline.coords){for(c in b.polyline.coords)f(b.polyline.coords,c)&&(d=b.polyline.coords,e!==d[c]&&k.push(new google.maps.LatLng(d[c][0],d[c][1])));c=new google.maps.Polyline({path:k,strokeColor:b.polyline.color||"#FF0000",strokeOpacity:1,strokeWeight:b.polyline.width||2});this._polylines.push(c);c.setMap(a)}},drawPolygon:function(a,b){var c={},c="",d={},k=[];b=b?b:this.options;if(e!==b.polygon&&e!==b.polygon.coords){for(c in b.polygon.coords)f(b.polygon.coords,c)&&(d=b.polygon.coords,
e!==d[c]&&k.push(new google.maps.LatLng(d[c][0],d[c][1])));c=new google.maps.Polygon({path:k,strokeColor:b.polygon.color||"#FF0000",strokeOpacity:1,strokeWeight:b.polygon.width||2,fillColor:b.polygon.fillcolor||"#CC0000",fillOpacity:0.35});this._polygons.push(c);c.setMap(this.map);h.isFunction(b.polygon.click)&&google.maps.event.addListener(c,"click",b.polygon.click)}},drawCircle:function(a,b){var c=0,d={},d={};b=b?b:this.options;if(e!==b.circle&&0<b.circle.length)for(c=b.circle.length-1;0<=c;c-=
1)d=b.circle[c],e!==d.center.x&&e!==d.center.y&&(d=new google.maps.Circle({strokeColor:d.color||"#FF0000",strokeOpacity:d.opacity||0.8,strokeWeight:d.width||2,fillColor:d.fillcolor||"#FF0000",fillOpacity:d.fillopacity||0.35,map:this.map,center:new google.maps.LatLng(d.center.x,d.center.y),radius:d.radius||10,zIndex:100}),this._circles.push(d),h.isFunction(b.circle[c].click)&&google.maps.event.addListener(d,"click",b.circle[c].click))},overlay:function(){this.kml(this.map);this.direction(this.map);
this.markers(this.map);this.drawPolyline(this.map);this.drawPolygon(this.map);this.drawCircle(this.map)},markerIcon:function(a){var b=null;if(f(a,"icon")){if("string"===typeof a.icon)return a.icon;b={};f(a.icon,"url")&&(b.url=a.icon.url);f(a.icon,"size")&&e!==a.icon.size[0]&&e!==a.icon.size[1]&&(b.scaledSize=new google.maps.Size(a.icon.size[0],a.icon.size[1]));f(a.icon,"anchor")&&e!==a.icon.anchor[0]&&e!==a.icon.anchor[1]&&(b.anchor=new google.maps.Point(a.icon.anchor[0],a.icon.anchor[1]))}return b},
markerDirect:function(a){var b={},c={},c={},b=f(a,"text")?a.text.replace(/<([^>]+)>/g,""):"",c={map:this.map,position:new google.maps.LatLng(a.addr[0],a.addr[1]),title:b,infoWindow:new google.maps.InfoWindow({content:b}),animation:null};if(b=this.markerIcon(a))c.icon=b;f(a.animation)&&"string"===typeof a.animation&&(c.animation=google.maps.Animation[a.animation.toUpperCase()]);b=new google.maps.Marker(c);this._markers.push(b);f(b,"position")&&b.getPosition().lat()&&b.getPosition().lng()&&this.bounds.extend(c.position);
c={map:this.map,css:e!==a.css?a.css:""};"string"===typeof a.label&&0!==a.label.length&&(c.text=a.label);c=new l(c);c.bindTo("position",b,"position");c.bindTo("text",b,"position");c.bindTo("visible",b);this.bindEvent(b,a.event)},markerByGeocoder:function(a){var b=new google.maps.Geocoder,c=this;-1!==a.addr.indexOf(",")&&(a.addr="loc: "+a.addr);b.geocode({address:a.addr},function(b,k){if(k===google.maps.GeocoderStatus.OVER_QUERY_LIMIT)m.setTimeout(function(){c.markerByGeocoder(a)},c.interval);else if(k===
google.maps.GeocoderStatus.OK){var e={},g={},g={},e=f(a,"text")?a.text.toString():"",g={map:c.map,position:b[0].geometry.location,title:e,infoWindow:new google.maps.InfoWindow({content:e}),animation:null};if(e=c.markerIcon(a))g.icon=e;f(a,"animation")&&"string"===typeof a.animation&&(g.animation=google.maps.Animation[a.animation.toUpperCase()]);e=new google.maps.Marker(g);c._markers.push(e);f(e,"position")&&e.getPosition().lat()&&e.getPosition().lng()&&c.bounds.extend(g.position);g={map:c.map,css:a.css||
""};"string"===typeof a.label&&0!==a.label.length&&(g.text=a.label);g=new l(g);g.bindTo("position",e,"position");g.bindTo("text",e,"position");g.bindTo("visible",e);c.bindEvent(e,a.event)}})},directionService:function(a){var b=[],c=new google.maps.DirectionsService,d=new google.maps.DirectionsRenderer,k={travelMode:google.maps.DirectionsTravelMode.DRIVING,optimizeWaypoints:a.optimize||!1},f=0,g=0;"string"===typeof a.from&&(k.origin=a.from);"string"===typeof a.to&&(k.destination=a.to);"string"===typeof a.travel&&
0<a.travel.length&&(k.travelMode=google.maps.DirectionsTravelMode[a.travel.toUpperCase()]);if(e!==a.waypoint&&0!==a.waypoint){f=0;for(g=a.waypoint.length;f<g;f+=1)b.push({location:a.waypoint[f].toString(),stopover:!0});k.waypoints=b}e!==k.origin&&e!==k.destination&&(c.route(k,function(a,b){b===google.maps.DirectionsStatus.OK&&d.setDirections(a)}),d.setMap(this.map),this._directions.push(d))},bindEvent:function(a,b){var c=this;"function"===typeof b?google.maps.event.addListener(a,"click",b):f(b,"type")?
"string"===typeof b.type&&"function"===typeof b.bind&&google.maps.event.addListener(a,b.type,b.bind):google.maps.event.addListener(a,"click",function(){a.infoWindow.open(c.map,a)})},init:function(){var a=this,b={};"string"===typeof a.options.center?m.setTimeout(function(){var c=h(a.container),d="";-1!==a.options.center.indexOf(",")&&(a.options.center="loc: "+a.options.center);b=new google.maps.Geocoder;b.geocode({address:a.options.center},function(b,f){try{f===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?
a.init():f===google.maps.GeocoderStatus.OK&&0!==b.length?(a.GoogleMapOptions.center=f===google.maps.GeocoderStatus.OK&&0!==b.length?b[0].geometry.location:"",a.map=new google.maps.Map(a.container,a.GoogleMapOptions),google.maps.event.addListenerOnce(a.map,"idle",function(){a.overlay();a.options.marker.length&&!0===a.options.markerFitBounds&&setTimeout(function(){a.map.fitBounds(a.bounds)},a.interval);"function"===typeof MarkerClusterer&&!0===a.options.markerCluster&&(a.markerCluster=new MarkerClusterer(a.map,
a._markers))})):(d=a.options.notfound.text||f,c.html(d.replace(/</g,"&lt;").replace(/>/g,"&gt;")))}catch(g){c.html((e!==g.message?g.message:g.description).toString())}})},a.interval):(a.map=new google.maps.Map(a.container,a.GoogleMapOptions),google.maps.event.addListenerOnce(a.map,"idle",function(){a.overlay();"function"===typeof MarkerClusterer&&!0===a.options.markerCluster&&(a.markerCluster=new MarkerClusterer(a.map,a._markers));a.options.marker.length&&!0===a.options.markerFitBounds&&a.map.fitBounds(a.bounds)}))},
panto:function(a){var b=this,c="",d={};f(b,"map")&&null!==b.map&&e!==b.map&&("string"===typeof a?(-1!==a.indexOf(",")&&(c="loc: "+a),d=new google.maps.Geocoder,d.geocode({address:a},function(a,c){c===google.maps.GeocoderStatus.OK&&h.isFunction(b.map.panTo)&&e!==a[0]&&b.map.panTo(a[0].geometry.location)})):("[object Array]"===Object.prototype.toString.call(a)?2===a.length&&(c=new google.maps.LatLng(a[0],a[1])):f(a,"lat")&&f(a,"lng")?c=new google.maps.LatLng(a.lat,a.lng):f(a,"x")&&f(a,"y")&&(c=new google.maps.LatLng(a.x,
a.y)),h.isFunction(b.map.panTo)&&e!==c&&b.map.panTo(c)))},clear:function(a){var b=[],c="",d=0,f=0;"string"===typeof a&&(b=a.split(","));for(d=0;d<b.length;d+=1)if(c="_"+h.trim(b[d].toString().toLowerCase())+"s",e!==this[c]&&this[c].length){for(f=0;f<this[c].length;f+=1)this.map===this[c][f].getMap()&&(this[c][f].set("visible",!1),this[c][f].setMap(this.map,null),this[c][f].set("directions",null));this[c]=[]}},modify:function(a){var b=[],c=[["kml","kml"],["marker","markers"],["direction","direction"],
["polyline","drawPolyline"],["polygon","drawPolygon"],["circle","drawCircle"],["zoom","setZoom"]],d=0;if(e!==a){for(d=0;d<c.length;d+=1)f(a,c[d][0])&&b.push(c[d][1]);if(null!==this.map)if(b.length)for(d=0;d<b.length;d+=1){if("function"===typeof this[b[d]])this[b[d]](this.map,a)}else this.map.setOptions(a)}}};h.fn.tinyMap=function(a){var b=arguments,c=[],d={};return"string"===typeof a?(this.each(function(){d=h.data(this,"tinyMap");d instanceof n&&"function"===typeof d[a]&&(c=d[a].apply(d,Array.prototype.slice.call(b,
1)))}),e!==c?c:this):this.each(function(){h.data(this,"tinyMap")||h.data(this,"tinyMap",new n(this,a))})}})(jQuery,window,document);
